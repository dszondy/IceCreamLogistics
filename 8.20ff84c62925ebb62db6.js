(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{R90S:function(e,t,i){"use strict";i.r(t),i.d(t,"DeliveryModule",function(){return L});var c=i("ofXK"),r=i("tyNb"),n=i("PCNd"),d=i("20UA"),s=i("fXoL"),o=i("3Pt+"),a=i("44PX"),b=i("vxfF"),l=i("2Vo4"),h=i("XNiG"),p=i("vkgz"),f=i("lJxs"),v=i("gcYM"),u=i("5+tZ"),m=i("Kqap"),y=i("psEu"),g=i("FrXe"),S=i("fU1k");function T(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",14),s.Tb(1,"div",15),s.Cc(2),s.Sb(),s.Tb(3,"div",16),s.Cc(4),s.Sb(),s.Tb(5,"div",17),s.Tb(6,"app-add-check",18),s.ac("checkedChange",function(t){s.vc(e);const i=s.ec().$implicit;return s.ec(2).onOrderChecked(t,i)}),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.ec().$implicit,t=s.ec(2);s.Bb(2),s.Fc("",e.client.name," (",e.requestedDate,")"),s.Bb(2),s.Dc(e.items.length),s.Bb(2),s.kc("checked",t.isOrderSelected(e))}}function O(e,t){if(1&e&&(s.Tb(0,"div",14),s.Tb(1,"div",15),s.Cc(2),s.Sb(),s.Tb(3,"div",16),s.Cc(4),s.Sb(),s.Ob(5,"div",17),s.Sb()),2&e){const e=t.$implicit;s.Bb(2),s.Ec(" ",e.recipe.name," "),s.Bb(2),s.Fc(" ",e.mixedAmount," / ",e.amount," ")}}function C(e,t){if(1&e&&s.Ac(0,O,6,3,"div",19),2&e){const e=s.ec().$implicit;s.kc("ngForOf",e.items)}}function B(e,t){1&e&&(s.Tb(0,"app-tree-node"),s.Ac(1,T,7,4,"ng-template",null,12,s.Bc),s.Ac(3,C,1,1,"ng-template",null,13,s.Bc),s.Sb())}function w(e,t){if(1&e){const e=s.Ub();s.Rb(0,9),s.Tb(1,"cdk-virtual-scroll-viewport",10),s.ac("scrolledIndexChange",function(i){s.vc(e);const c=t.ngIf;return s.ec().nextBatch(i,c.length)}),s.Ac(2,B,5,0,"app-tree-node",11),s.Sb(),s.Qb()}if(2&e){const e=t.ngIf;s.Bb(1),s.kc("itemSize",124),s.Bb(1),s.kc("cdkVirtualForOf",e)}}let k=(()=>{class e{constructor(e){this.ordersClient=e,this.batch=10,this.theEnd=!1,this.offset=new l.a(0),this.itemsDisplayedSubject=new h.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable(),this.orderAdded=new s.n,this.orderRemoved=new s.n}ngOnInit(){this.reset()}getBatch(e){return this.ordersClient.searchForDelivery(new d.u,e,this.batch).pipe(Object(p.a)(e=>this.theEnd=!e.hasMore),Object(f.a)(e=>e.content))}nextBatch(e,t){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(t)}filterChange(){this.reset()}onOrderChecked(e,t){e?this.orderAdded.emit(t):this.orderRemoved.emit(t)}reset(){this.offset=new l.a(0),this.offset.pipe(Object(v.a)(500),Object(u.b)(e=>this.getBatch(e)),Object(m.a)((e,t)=>e.concat(t),[])).pipe(Object(p.a)(e=>this.itemsDisplayed=e),Object(p.a)(e=>this.itemsDisplayedSubject.next(e))).subscribe(),this.offset.next(0)}isOrderSelected(e){return this.selectedOrdersById.has(e.id)}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(d.y))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-list-orders-for-delivery"]],viewQuery:function(e,t){if(1&e&&s.Jc(b.c,1),2&e){let e;s.sc(e=s.bc())&&(t.viewport=e.first)}},inputs:{selectedOrdersById:"selectedOrdersById"},outputs:{orderAdded:"orderAdded",orderRemoved:"orderRemoved"},decls:18,vars:11,consts:[["type","info"],[1,"row"],[1,"form-group","col-lg-6"],["for","from",1,"form-label"],["id","from","type","date",1,"form-control",3,"ngModel","ngModelChange"],["for","to",1,"form-label"],["id","to","type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"card","bg-primary","p-2"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],["head",""],["content",""],[1,"row","align-items-center"],[1,"col-6"],[1,"col-5"],[1,"col-1"],[3,"checked","checkedChange"],["class","row  align-items-center",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.Tb(0,"alert",0),s.Cc(1,"Keres\xe9s kisz\xe1ll\xedt\xe1si d\xe1tum szerint t\xf3l/ig"),s.Ob(2,"br"),s.Tb(3,"div",1),s.Tb(4,"div",2),s.Tb(5,"label",3),s.Cc(6,"Kisz\xe1ll\xedt\xe1s d\xe1tuma: "),s.Sb(),s.Tb(7,"input",4),s.ac("ngModelChange",function(e){return t.from=e,t.filterChange()}),s.fc(8,"date"),s.Sb(),s.Sb(),s.Cc(9,"a "),s.Tb(10,"div",2),s.Tb(11,"label",5),s.Cc(12," - "),s.Sb(),s.Tb(13,"input",6),s.ac("ngModelChange",function(e){return t.to=e,t.filterChange()}),s.fc(14,"date"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(15,"div",7),s.Ac(16,w,3,2,"ng-container",8),s.fc(17,"async"),s.Sb()),2&e&&(s.Bb(7),s.kc("ngModel",s.hc(8,3,t.from,"yyyy-MM-dd")),s.Bb(6),s.kc("ngModel",s.hc(14,6,t.to,"yyyy-MM-dd")),s.Bb(3),s.kc("ngIf",s.gc(17,9,t.itemsDisplayedObservable)))},directives:[y.a,o.b,o.h,o.j,c.l,b.c,b.a,b.b,g.a,S.a,c.k],pipes:[c.e,c.b],styles:[""]}),e})();var M=i("m1XX"),I=i("6NWb");function D(e,t){if(1&e&&(s.Tb(0,"div",3),s.Tb(1,"div",4),s.Cc(2),s.fc(3,"date"),s.Sb(),s.Tb(4,"div",5),s.Cc(5),s.Sb(),s.Ob(6,"div",5),s.Sb()),2&e){const e=s.ec().$implicit;s.Bb(2),s.Fc("",e.client.name," (",s.hc(3,3,e.requestedDate,"yyyy-MM-dd"),")"),s.Bb(3),s.Dc(e.items.length)}}function F(e,t){if(1&e&&(s.Tb(0,"div",3),s.Tb(1,"div",4),s.Cc(2),s.Sb(),s.Tb(3,"div",5),s.Cc(4),s.Sb(),s.Tb(5,"div",5),s.Tb(6,"button",7),s.Ob(7,"fa-icon",8),s.Sb(),s.Sb(),s.Tb(8,"div",9),s.Tb(9,"div",10),s.Tb(10,"alert",11),s.Tb(11,"div"),s.Tb(12,"h1"),s.Cc(13),s.Sb(),s.Tb(14,"h2"),s.Cc(15),s.Sb(),s.Tb(16,"h5"),s.Cc(17),s.Sb(),s.Cc(18),s.fc(19,"date"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e){const e=t.$implicit,i=s.ec(2).$implicit;s.Bb(2),s.Ec(" ",e.recipe.name," "),s.Bb(2),s.Fc(" ",e.mixedAmount," / ",e.amount," "),s.Bb(2),s.mc("printSectionId","print-",i.id,"}-",e.recipe.id,""),s.kc("useExistingCss",!0),s.Bb(3),s.mc("id","print-",i.id,"}-",e.recipe.id,""),s.Bb(4),s.Dc(e.recipe.name),s.Bb(2),s.Dc(i.client.name),s.Bb(2),s.Dc(e.recipe.descriptionForLabels),s.Bb(1),s.Ec(" lej\xe1rat: ",s.hc(19,12,i.requestedDate,"yyyy-MM-dd")," ")}}function j(e,t){if(1&e&&s.Ac(0,F,20,15,"div",6),2&e){const e=s.ec().$implicit;s.kc("ngForOf",e.items)}}function A(e,t){1&e&&(s.Tb(0,"app-tree-node"),s.Ac(1,D,7,6,"ng-template",null,1,s.Bc),s.Ac(3,j,1,1,"ng-template",null,2,s.Bc),s.Sb())}let x=(()=>{class e{constructor(){this.orderRemoved=new s.n}ngOnInit(){}onOrderChecked(e,t){this.orderRemoved.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Hb({type:e,selectors:[["app-preview-batch"]],inputs:{orders:"orders"},outputs:{orderRemoved:"orderRemoved"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["head",""],["content",""],[1,"row","align-items-center"],[1,"col-6"],[1,"col-3"],["class","row  align-items-center",4,"ngFor","ngForOf"],["ngxPrint","",1,"btn","btn-light",3,"printSectionId","useExistingCss"],["icon","print"],[2,"height","0","overflow","hidden"],[3,"id"],["type","primary",2,"width","50%"]],template:function(e,t){1&e&&s.Ac(0,A,5,0,"app-tree-node",0),2&e&&s.kc("ngForOf",t.orders)},directives:[c.k,g.a,M.a,I.a,y.a],pipes:[c.e],styles:[""]}),e})();function R(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",1),s.Tb(1,"div",2),s.Tb(2,"button",3),s.ac("click",function(){return s.vc(e),s.ec().save()}),s.Cc(3," Ment\xe9s "),s.Sb(),s.Sb(),s.Tb(4,"div",4),s.Tb(5,"div",5),s.Tb(6,"label",6),s.Cc(7,"N\xe9v: "),s.Sb(),s.Tb(8,"input",7),s.ac("ngModelChange",function(t){return s.vc(e),s.ec().delivery.name=t}),s.Sb(),s.Sb(),s.Tb(9,"div",8),s.Tb(10,"label",9),s.Cc(11,"Kisz\xe1ll\xedt\xe1s d\xe1tuma: "),s.Sb(),s.Tb(12,"input",10),s.ac("ngModelChange",function(t){return s.vc(e),s.ec().delivery.deliveryDate=t}),s.fc(13,"date"),s.Sb(),s.Sb(),s.Sb(),s.Tb(14,"tabset"),s.Tb(15,"tab",11,12),s.Tb(17,"app-list-orders-for-delivery",13),s.ac("orderAdded",function(t){return s.vc(e),s.ec().orderAdded(t)})("orderRemoved",function(t){return s.vc(e),s.ec().orderRemoved(t)}),s.Sb(),s.Sb(),s.Tb(18,"tab",14),s.Tb(19,"app-preview-batch",15),s.ac("orderRemoved",function(t){return s.vc(e),s.ec().orderRemoved(t)}),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.ec();s.Bb(8),s.kc("ngModel",e.delivery.name),s.Bb(4),s.kc("ngModel",s.hc(13,4,e.delivery.deliveryDate,"yyyy-MM-dd")),s.Bb(5),s.kc("selectedOrdersById",e.selectedOrdersById),s.Bb(2),s.kc("orders",e.selectedOrders())}}let E=(()=>{class e{constructor(e,t){this.deliveryClient=t,this.selectedOrdersById=new Map,e.snapshot.params.id?this.deliveryClient.get(e.snapshot.params.id).subscribe(e=>{this.delivery=e,this.selectedOrdersById=new Map,this.delivery.orders.forEach(e=>{this.selectedOrdersById.set(e.id,e)})}):this.delivery=new d.h({name:"",deliveryDate:new Date,orders:[],id:void 0,completed:!1})}ngOnInit(){}save(){const e=new d.i({completed:!1,id:this.delivery.id,name:this.delivery.name,deliveryDate:new Date(Date.parse(this.delivery.deliveryDate)),orderIds:Array.from(this.selectedOrdersById.keys())});this.delivery.id?this.deliveryClient.update(e.id,e).subscribe(()=>{}):this.deliveryClient.create(e).subscribe(()=>{})}orderAdded(e){this.selectedOrdersById.set(e.id,e)}orderRemoved(e){this.selectedOrdersById.delete(e.id)}selectedOrders(){return Array.from(this.selectedOrdersById.values())}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(r.a),s.Nb(d.g))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-create-delivery-batch"]],decls:1,vars:1,consts:[["class","m-2 p-2",4,"ngIf"],[1,"m-2","p-2"],[1,"d-flex","row","justify-content-end"],[1,"btn","btn-success",3,"click"],[1,"row","mb-4"],[1,"row","p-2","col-lg-7","m-0"],["for","name"],["id","name","placeholder","Name","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","p-2","col-5","m-0"],["for","date"],["id","date","type","date",1,"form-control",3,"ngModel","ngModelChange"],["heading","Keres\xe9s"],["searchTab","tab"],[3,"selectedOrdersById","orderAdded","orderRemoved"],["heading","R\xe9szletek"],[3,"orders","orderRemoved"]],template:function(e,t){1&e&&s.Ac(0,R,20,7,"div",0),2&e&&s.kc("ngIf",t.delivery)},directives:[c.l,o.b,o.h,o.j,a.c,a.a,k,x],pipes:[c.e],styles:[""]}),e})();const z=function(e){return[e]};function N(e,t){if(1&e&&(s.Tb(0,"div"),s.Tb(1,"alert",5),s.Tb(2,"div",6),s.Tb(3,"div",7),s.Tb(4,"a",8),s.Cc(5),s.fc(6,"date"),s.Sb(),s.Sb(),s.Tb(7,"div",9),s.Cc(8),s.Sb(),s.Tb(9,"div",9),s.Cc(10),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e){const e=t.$implicit;s.Bb(4),s.kc("routerLink",s.oc(9,z,e.id)),s.Bb(1),s.Fc("",e.name," (",s.hc(6,6,e.deliveryDate,"yyyy-MM-dd"),")"),s.Bb(3),s.Fc("",e.orderCount," megrendel\xe9s ",e.clientCount," kliens sz\xe1m\xe1ra"),s.Bb(2),s.Ec(" ",e.completed?"Kisz\xe1ll\xedtva":"Folyamatban"," ")}}function $(e,t){if(1&e){const e=s.Ub();s.Rb(0,2),s.Tb(1,"cdk-virtual-scroll-viewport",3),s.ac("scrolledIndexChange",function(i){s.vc(e);const c=t.ngIf;return s.ec().nextBatch(i,c.length)}),s.Ac(2,N,11,11,"div",4),s.Sb(),s.Qb()}if(2&e){const e=t.ngIf;s.Bb(1),s.kc("itemSize",200),s.Bb(1),s.kc("cdkVirtualForOf",e)}}const K=[{path:"new",component:E},{path:":id",component:E},{path:"",component:(()=>{class e{constructor(e){this.deliveryClient=e,this.batch=10,this.theEnd=!1,this.offset=new l.a(0),this.deliverySelected=new s.n,this.itemsDisplayedSubject=new h.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable()}ngOnInit(){this.reset()}getBatch(e){return this.deliveryClient.list(null,e,this.batch).pipe(Object(p.a)(e=>this.theEnd=!e.hasMore),Object(f.a)(e=>e.content))}nextBatch(e,t){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(t)}filterChange(){this.reset()}reset(){this.offset=new l.a(0),this.offset.pipe(Object(v.a)(500),Object(u.b)(e=>this.getBatch(e)),Object(m.a)((e,t)=>e.concat(t),[])).pipe(Object(p.a)(e=>this.itemsDisplayed=e),Object(p.a)(e=>this.itemsDisplayedSubject.next(e))).subscribe(),this.offset.next(0)}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(d.g))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-list-deliveries"]],viewQuery:function(e,t){if(1&e&&s.Jc(b.c,1),2&e){let e;s.sc(e=s.bc())&&(t.viewport=e.first)}},outputs:{deliverySelected:"deliverySelected"},decls:3,vars:3,consts:[[1,"card","bg-primary","p-2"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],["type","success"],[1,"row","align-items-center"],[1,"col-6"],[1,"text-dark",3,"routerLink"],[1,"col-3"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Ac(1,$,3,2,"ng-container",1),s.fc(2,"async"),s.Sb()),2&e&&(s.Bb(1),s.kc("ngIf",s.gc(2,1,t.itemsDisplayedObservable)))},directives:[c.l,b.c,b.a,b.b,y.a,r.d],pipes:[c.b,c.e],styles:[""]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},imports:[[c.c,n.a,r.e.forChild(K),o.f,a.b,b.d,y.b,I.c,M.b]]}),e})()}}]);