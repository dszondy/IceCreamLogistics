(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{cLqD:function(t,e,n){"use strict";n.r(e),n.d(e,"InventoryModule",function(){return w});var i=n("ofXK"),c=n("tyNb"),a=n("vxfF"),s=n("2Vo4"),o=n("XNiG"),r=n("vkgz"),b=n("lJxs"),l=n("gcYM"),u=n("5+tZ"),d=n("Kqap"),m=n("fXoL"),h=n("20UA"),v=n("3Pt+");let g=(()=>{class t{constructor(t){this.inventoryClient=t,this.completionSubject=new o.a,this.completionObservable=this.completionSubject.asObservable()}ngOnInit(){var t,e;this.quantity=(null===(t=this.item)||void 0===t?void 0:t.amountOnHand)/(null===(e=this.item)||void 0===e?void 0:e.quantityPerPackage)}submit(){this.inventoryClient.setInventory(this.item.id,this.quantity*this.item.quantityPerPackage).subscribe(t=>{this.item.amountOnHand=t.amountOnHand,this.completionSubject.next()})}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(h.l))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-set-inventory-modal"]],inputs:{item:"item"},decls:17,vars:8,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"modal-subtitle"],["for","amount"],[1,"d-flex"],["id","amount","type","number",1,"form-control",3,"ngModel","min","ngModelChange"],[1,"ml-2"],[1,"d-flex","justify-content-end"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"h2",1),m.Cc(2,"Rakt\xe1rk\xe9szlet be\xe1ll\xedt\xe1sa"),m.Sb(),m.Sb(),m.Tb(3,"div",2),m.Tb(4,"h3",3),m.Cc(5),m.Sb(),m.Tb(6,"pre"),m.Cc(7),m.Sb(),m.Tb(8,"label",4),m.Cc(9,"\xdaj mennyis\xe9g"),m.Sb(),m.Tb(10,"div",5),m.Tb(11,"input",6),m.ac("ngModelChange",function(t){return e.quantity=t}),m.Sb(),m.Tb(12,"div",7),m.Cc(13),m.Sb(),m.Sb(),m.Tb(14,"div",8),m.Tb(15,"button",9),m.ac("click",function(){return e.submit()}),m.Cc(16,"Ment\xe9s"),m.Sb(),m.Sb(),m.Sb()),2&t&&(m.Bb(5),m.Dc(e.item.name),m.Bb(2),m.Gc("    Rakt\xe1ron: ",e.item.amountOnHand/e.item.quantityPerPackage," db\n    Mennyis\xe9g: ",e.item.amountOnHand," ",e.item.measurementUnit,"\n\n  "),m.Bb(4),m.kc("ngModel",e.quantity)("min",0),m.Bb(2),m.Fc(" x ",e.item.quantityPerPackage," ",e.item.measurementUnit," "))},directives:[v.k,v.b,v.h,v.j],styles:[""]}),t})(),p=(()=>{class t{constructor(t){this.inventoryClient=t,this.completionSubject=new o.a,this.completionObservable=this.completionSubject.asObservable(),this.quantity=0}ngOnInit(){}submit(){this.inventoryClient.addToInventory(this.item.id,this.quantity*this.item.quantityPerPackage).subscribe(t=>{this.item.amountOnHand=t.amountOnHand,this.completionSubject.next()})}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(h.l))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-add-inventory-modal"]],inputs:{item:"item"},decls:14,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-subtitle"],[1,"modal-body"],["for","amount"],["id","amount","type","number",1,"form-control",3,"ngModel","min","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"h2",1),m.Cc(2,"Rakt\xe1rk\xe9szlet be\xe1ll\xedt\xe1sa"),m.Sb(),m.Tb(3,"h3",2),m.Cc(4),m.Sb(),m.Sb(),m.Tb(5,"div",3),m.Tb(6,"pre"),m.Cc(7),m.Sb(),m.Tb(8,"label",4),m.Cc(9,"Be\xe9rkezett mennyis\xe9g"),m.Sb(),m.Tb(10,"input",5),m.ac("ngModelChange",function(t){return e.quantity=t}),m.Sb(),m.Cc(11),m.Tb(12,"button",6),m.ac("click",function(){return e.submit()}),m.Cc(13,"Ment\xe9s"),m.Sb(),m.Sb()),2&t&&(m.Bb(4),m.Dc(e.item.name),m.Bb(3),m.Gc("    Rakt\xe1ron: ",e.item.amountOnHand/e.item.quantityPerPackage," db\n    Mennyis\xe9g: ",e.item.amountOnHand," ",e.item.measurementUnit,"\n\n  "),m.Bb(3),m.kc("ngModel",e.quantity)("min",0),m.Bb(1),m.Ec(" x ",e.item.quantityPerPackage," "))},directives:[v.k,v.b,v.h,v.j],styles:[""]}),t})();var y=n("K3ix");let f=(()=>{class t{constructor(t){this.modalService=t}addInventoryDialog(t){const e=this.modalService.show(p,{initialState:{item:t}});return e.content.completionObservable.pipe(Object(r.a)(t=>e.hide()))}setInventoryDialog(t){const e=this.modalService.show(g,{initialState:{item:t}});return e.content.completionObservable.pipe(Object(r.a)(t=>e.hide()))}}return t.\u0275fac=function(e){return new(e||t)(m.Xb(y.a))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=n("6NWb");const k=function(t,e,n){return{"bg-danger":t,"bg-warning":e,"text-white":n}};function O(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div"),m.Tb(1,"div",7),m.Tb(2,"div",1),m.Cc(3),m.Sb(),m.Tb(4,"div",8),m.Tb(5,"div"),m.Cc(6),m.Sb(),m.Tb(7,"div"),m.Cc(8),m.Sb(),m.Sb(),m.Tb(9,"div",8),m.Tb(10,"div"),m.Cc(11),m.Sb(),m.Tb(12,"div"),m.Cc(13),m.Sb(),m.Sb(),m.Tb(14,"div",8),m.Tb(15,"button",9),m.ac("click",function(){m.vc(t);const n=e.$implicit;return m.ec(2).set(n)}),m.Ob(16,"fa-icon",10),m.Sb(),m.Tb(17,"button",11),m.ac("click",function(){m.vc(t);const n=e.$implicit;return m.ec(2).add(n)}),m.Ob(18,"fa-icon",12),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=e.$implicit,n=m.ec(2);m.Bb(1),m.kc("ngClass",m.qc(9,k,n.isDanger(t),n.isWarning(t),n.isWarning(t)||n.isDanger(t))),m.Bb(2),m.Dc(t.name),m.Bb(3),m.Fc("",t.amountOnHand," ",t.measurementUnit," "),m.Bb(2),m.Ec(" (",t.amountOnHand/t.quantityPerPackage," csomag)"),m.Bb(3),m.Fc("",t.amountRequired," ",t.measurementUnit," "),m.Bb(2),m.Fc(" (+",t.warningThreshold," ",t.measurementUnit,")")}}function T(t,e){if(1&t){const t=m.Ub();m.Rb(0,4),m.Tb(1,"cdk-virtual-scroll-viewport",5),m.ac("scrolledIndexChange",function(e){m.vc(t);const n=m.ec();return n.nextBatch(e,n.orders.length)}),m.Ac(2,O,19,13,"div",6),m.Sb(),m.Qb()}if(2&t){const t=e.ngIf;m.Bb(1),m.kc("itemSize",124),m.Bb(1),m.kc("cdkVirtualForOf",t)}}const C=[{path:"",component:(()=>{class t{constructor(t,e){this.inventoryClient=t,this.inventoryChangeService=e,this.batch=10,this.theEnd=!1,this.offset=new s.a(0),this.itemsDisplayedSubject=new o.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable()}ngOnInit(){this.reset()}getBatch(t){return this.inventoryClient.searchInventory(null,t,this.batch).pipe(Object(r.a)(t=>this.theEnd=!t.hasMore),Object(b.a)(t=>t.content))}nextBatch(t,e){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(e)}filterChange(){this.reset()}reset(){this.offset=new s.a(0),this.offset.pipe(Object(l.a)(500),Object(u.b)(t=>this.getBatch(t)),Object(d.a)((t,e)=>t.concat(e),[])).pipe(Object(r.a)(t=>this.itemsDisplayed=t),Object(r.a)(t=>this.itemsDisplayedSubject.next(t))).subscribe(),this.offset.next(0)}isDanger(t){return t.amountRequired>t.amountOnHand&&!this.isWarning(t)}isWarning(t){return t.amountRequired<=t.amountOnHand&&t.amountRequired+t.warningThreshold>t.amountOnHand}add(t){this.inventoryChangeService.addInventoryDialog(t).subscribe()}set(t){this.inventoryChangeService.setInventoryDialog(t).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(h.l),m.Nb(f))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-inventory"]],viewQuery:function(t,e){if(1&t&&m.Jc(a.c,1),2&t){let t;m.sc(t=m.bc())&&(e.viewport=t.first)}},decls:10,vars:3,consts:[[1,"row","col-lg-8","align-items-center"],[1,"col-3"],[1,"col-6"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"row","col-lg-8","align-items-center","align-self-center",3,"ngClass"],[1,"col-3","row"],[1,"btn","btn-secondary","m-1",3,"click"],["icon","box-open"],[1,"btn","btn-primary","m-1",3,"click"],["icon","plus"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Cc(2,"Alapanyag"),m.Sb(),m.Tb(3,"div",1),m.Cc(4,"Rakt\xe1ron"),m.Sb(),m.Tb(5,"div",2),m.Cc(6,"Sz\xfcks\xe9ges (+Tartal\xe9k)"),m.Sb(),m.Sb(),m.Ob(7,"hr"),m.Ac(8,T,3,2,"ng-container",3),m.fc(9,"async")),2&t&&(m.Bb(8),m.kc("ngIf",m.gc(9,1,e.itemsDisplayedObservable)))},directives:[i.l,a.c,a.a,a.b,i.j,S.a],pipes:[i.b],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[i.c,c.e.forChild(C),a.d,S.c,v.f]]}),t})()}}]);