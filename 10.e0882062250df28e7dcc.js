(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+p+5":function(e,t,n){"use strict";n.r(t),n.d(t,"OrderModule",function(){return F});var i=n("ofXK"),c=n("tyNb"),r=n("20UA"),s=n("vkgz"),a=n("fXoL"),l=n("HDdC"),o=n("5+tZ"),d=n("lJxs"),b=n("3Pt+"),h=n("qCdp"),p=n("6NWb");let u=(()=>{class e{constructor(){this.clientChange=new a.n}ngOnInit(){}changeClient(){this.clientChange.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Gb({type:e,selectors:[["app-client-details"]],inputs:{client:"client"},outputs:{clientChange:"clientChange"},decls:13,vars:6,consts:[[1,"card"],[1,"card-body"],[1,"row","d-flex","align-items-center","m-0"],[1,"btn","btn-dark","ml-2",3,"click"],["icon","edit"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"h2"),a.wc(4),a.Rb(),a.Sb(5,"button",3),a.Zb("click",function(){return t.changeClient()}),a.Nb(6,"fa-icon",4),a.Rb(),a.Rb(),a.Sb(7,"p"),a.wc(8),a.Rb(),a.Sb(9,"p"),a.wc(10,"Tel:"),a.Rb(),a.Sb(11,"p"),a.wc(12,"Email:"),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.Bb(4),a.xc(t.client.name),a.Bb(4),a.Ac("C\xedm: ",t.client.address.zip,", ",t.client.address.city,", ",t.client.address.addressLine," (",t.client.address.region," / ",t.client.address.country,") "))},directives:[p.a],styles:[""]}),e})();function g(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div"),a.Sb(1,"label",3),a.wc(2,"Megrendel\u0151: "),a.Rb(),a.Sb(3,"input",4),a.Zb("typeaheadLoading",function(t){return a.pc(e),a.bc().changeTypeaheadLoading(t)})("typeaheadOnSelect",function(t){return a.pc(e),a.bc().onClientSelected(t)})("ngModelChange",function(t){return a.pc(e),a.bc().asyncSelected=t}),a.Rb(),a.Rb()}if(2&e){const e=a.bc();a.Bb(3),a.hc("ngModel",e.asyncSelected)("isAnimated",!0)("typeaheadAsync",!0)("typeahead",e.clients)}}function m(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-client-details",5),a.Zb("clientChange",function(){return a.pc(e),a.bc().startSearch()}),a.Rb()}if(2&e){const e=a.bc();a.hc("client",e.selectedClient)}}let f=(()=>{class e{constructor(e){this.clientClient=e,this.searchInProgress=!0,this.selectedClientChange=new a.n,this.clients=new l.a(e=>{e.next(this.asyncSelected)}).pipe(Object(o.b)(e=>this.getClientsAsObservable(e)))}ngOnInit(){}startSearch(){this.searchInProgress=!0}getClientsAsObservable(e){return this.clientClient.get(0,10,e).pipe(Object(d.a)(e=>e.content))}changeTypeaheadLoading(e){this.typeaheadLoading=e}onClientSelected(e){this.selectedClient=e.item,this.searchInProgress=!1,this.selectedClientChange.emit(this.selectedClient)}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(r.d))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-client-select"]],inputs:{selectedClient:"selectedClient"},outputs:{selectedClientChange:"selectedClientChange"},decls:3,vars:2,consts:[[1,"form-group"],[4,"ngIf"],[3,"client","clientChange",4,"ngIf"],["for","client",1,"form-label"],["id","client","placeholder","Keres\xe9s...","typeaheadOptionField","name",1,"form-control",3,"ngModel","isAnimated","typeaheadAsync","typeahead","typeaheadLoading","typeaheadOnSelect","ngModelChange"],[3,"client","clientChange"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.uc(1,g,4,4,"div",1),a.uc(2,m,1,1,"app-client-details",2),a.Rb()),2&e&&(a.Bb(1),a.hc("ngIf",t.searchInProgress),a.Bb(1),a.hc("ngIf",!t.searchInProgress))},directives:[i.l,b.a,b.d,b.g,h.a,u],styles:[""]}),e})();function S(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",1),a.Sb(1,"div",12),a.wc(2),a.Rb(),a.Sb(3,"div",13),a.wc(4),a.Rb(),a.Sb(5,"div",14),a.Sb(6,"button",15),a.Zb("click",function(){a.pc(e);const n=t.$implicit;return a.bc().removeItem(n)}),a.Nb(7,"fa-icon",16),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,n=a.bc();a.Bb(2),a.xc(e.recipe.name),a.Bb(2),a.zc("",e.amount," ",n.measurement,"")}}let y=(()=>{class e{constructor(e){this.recipeClient=e,this.measurement="adag",this.orderItemsChange=new a.n,this.orderItems=[],this.recipes=new l.a(e=>{e.next(this.asyncRecipeName)}).pipe(Object(o.b)(e=>this.getRecipesAsObservable(e)))}ngOnInit(){}addItem(){this.orderItems.find(e=>e.recipe.id===this.recipeSelected.id)?this.orderItems.find(e=>e.recipe.id===this.recipeSelected.id).amount+=this.amount:this.orderItems.push(new r.n({recipe:this.recipeSelected,amount:this.amount})),this.asyncRecipeName="",this.amount=void 0,this.recipeSelected=null,this.orderItemsChange.emit(this.orderItems)}onRecipeSelected(e){this.recipeSelected=e.item}removeItem(e){this.orderItems=this.orderItems.filter(t=>t.recipe.id!==e.recipe.id),this.orderItemsChange.emit(this.orderItems)}getRecipesAsObservable(e){return this.recipeClient.list(0,10,e).pipe(Object(d.a)(e=>e.content))}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(r.q))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-order-items"]],outputs:{orderItemsChange:"orderItemsChange"},decls:15,vars:8,consts:[[1,"card"],[1,"container","row","align-items-center"],[1,"col-lg-8","p-2"],["for","client",1,"form-label"],["id","client","placeholder","Keres\xe9s...","typeaheadOptionField","name",1,"form-control",3,"ngModel","isAnimated","typeaheadAsync","typeahead","typeaheadOnSelect","ngModelChange"],[1,"col-lg-3","col-11","p-2"],["for","amount",1,"form-label"],["id","amount","type","number",1,"form-control",3,"ngModel","min","ngModelChange"],[1,"col-1","p-2"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["icon","plus"],["class","container row align-items-center",4,"ngFor","ngForOf"],[1,"col-lg-8","col-6","p-2","pl-4","text-greater"],[1,"col-lg-3","col-4","p-2","pl-4","text-greater"],[1,"col-lg-1","col-2","p-2"],["type","button",1,"btn","btn-dark",3,"click"],["icon","trash"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"label",3),a.wc(4,"Recept: "),a.Rb(),a.Sb(5,"input",4),a.Zb("typeaheadOnSelect",function(e){return t.onRecipeSelected(e)})("ngModelChange",function(e){return t.asyncRecipeName=e}),a.Rb(),a.Rb(),a.Sb(6,"div",5),a.Sb(7,"label",6),a.wc(8,"Mennyis\xe9g: "),a.Rb(),a.Sb(9,"input",7),a.Zb("ngModelChange",function(e){return t.amount=e}),a.Rb(),a.Rb(),a.Sb(10,"div",8),a.Sb(11,"button",9),a.Zb("click",function(){return t.addItem()}),a.Nb(12,"fa-icon",10),a.Rb(),a.Rb(),a.Rb(),a.Nb(13,"hr"),a.uc(14,S,8,3,"div",11),a.Rb()),2&e&&(a.Bb(5),a.hc("ngModel",t.asyncRecipeName)("isAnimated",!0)("typeaheadAsync",!0)("typeahead",t.recipes),a.Bb(4),a.hc("ngModel",t.amount)("min",0),a.Bb(2),a.hc("disabled",!(t.recipeSelected&&t.amount)),a.Bb(3),a.hc("ngForOf",t.orderItems))},directives:[b.a,b.d,b.g,h.a,b.h,p.a,i.k],styles:[""]}),e})(),C=(()=>{class e{constructor(e,t){this.ordersClient=e,this.router=t}ngOnInit(){}onOrderItemsChange(e){this.orderItems=e}placeOrder(){const e=new r.m({id:void 0,orderCreated:new Date(Date.now()),client:this.selectedClient,requestedDate:new Date(Date.parse(this.date)),items:this.orderItems,orderState:r.o.Active});console.log(e),this.ordersClient.placeOrder(new r.k({items:[...e.items.map(e=>new r.l({recipeId:e.recipe.id,amount:e.amount}))],clientId:e.client.id,requestedDate:e.requestedDate})).pipe(Object(s.a)(()=>this.router.navigate(["/orders"]).then())).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(r.p),a.Mb(c.b))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-create-order"]],decls:15,vars:3,consts:[[1,"container","justify-content-center"],[1,"d-flex","flex-column"],[1,""],[3,"selectedClient","selectedClientChange"],[1,"mb-2"],["for","date",1,"form-label"],["id","date","type","date",1,"form-control",3,"ngModel","ngModelChange"],[3,"orderItemsChange"],[1,"d-flex","justify-content-end"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-danger","ml-2"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"app-client-select",3),a.Zb("selectedClientChange",function(e){return t.selectedClient=e}),a.Rb(),a.Rb(),a.Sb(4,"div",4),a.Sb(5,"label",5),a.wc(6,"Kisz\xe1ll\xedt\xe1s d\xe1tuma: "),a.Rb(),a.Sb(7,"input",6),a.Zb("ngModelChange",function(e){return t.date=e}),a.Rb(),a.Rb(),a.Sb(8,"div",4),a.Sb(9,"app-order-items",7),a.Zb("orderItemsChange",function(e){return t.onOrderItemsChange(e)}),a.Rb(),a.Rb(),a.Sb(10,"div",8),a.Sb(11,"button",9),a.Zb("click",function(){return t.placeOrder()}),a.wc(12," Rendel\xe9s lead\xe1sa "),a.Rb(),a.Sb(13,"button",10),a.wc(14,"M\xe9gse"),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.Bb(3),a.hc("selectedClient",t.selectedClient),a.Bb(4),a.hc("ngModel",t.date),a.Bb(4),a.hc("disabled",!t.date||!t.orderItems||0==t.orderItems.length||!t.selectedClient))},directives:[f,b.a,b.d,b.g,y],styles:[""]}),e})();var v=n("vxfF"),R=n("2Vo4"),w=n("XNiG"),M=n("gcYM"),I=n("Kqap"),O=n("psEu"),B=n("FrXe");function N(e,t){if(1&e&&(a.Sb(0,"div",17),a.Sb(1,"div",18),a.wc(2),a.cc(3,"date"),a.Rb(),a.Sb(4,"div",19),a.wc(5),a.Rb(),a.Sb(6,"div",20),a.wc(7),a.Rb(),a.Rb()),2&e){const e=a.bc().$implicit,t=a.bc(2);a.Bb(2),a.zc("",e.client.name," (",a.ec(3,4,e.requestedDate,"yyyy-MM-dd"),")"),a.Bb(3),a.xc(e.items.length),a.Bb(2),a.yc(" ",t.orderStatus[e.orderState]," ")}}function k(e,t){if(1&e&&(a.Sb(0,"div",17),a.Sb(1,"div",18),a.wc(2),a.Rb(),a.Sb(3,"div",19),a.wc(4),a.Rb(),a.Nb(5,"div",20),a.Rb()),2&e){const e=t.$implicit;a.Bb(2),a.yc(" ",e.recipe.name," "),a.Bb(2),a.yc(" ",e.amount," ")}}function x(e,t){if(1&e&&a.uc(0,k,6,2,"div",21),2&e){const e=a.bc().$implicit;a.hc("ngForOf",e.items)}}function j(e,t){1&e&&(a.Sb(0,"app-tree-node"),a.uc(1,N,8,7,"ng-template",null,15,a.vc),a.uc(3,x,1,1,"ng-template",null,16,a.vc),a.Rb())}function Z(e,t){if(1&e){const e=a.Tb();a.Qb(0,12),a.Sb(1,"cdk-virtual-scroll-viewport",13),a.Zb("scrolledIndexChange",function(n){a.pc(e);const i=t.ngIf;return a.bc().nextBatch(n,i.length)}),a.uc(2,j,5,0,"app-tree-node",14),a.Rb(),a.Pb()}if(2&e){const e=t.ngIf;a.Bb(1),a.hc("itemSize",200),a.Bb(1),a.hc("cdkVirtualForOf",e)}}const D=[{path:"",component:(()=>{class e{constructor(e){this.ordersClient=e,this.orderStatus=["T\xf6r\xf6lve","V\xe1raoz\xf3","Folyamatban","El\u0151k\xe9sz\xedtve","Kisz\xe1ll\xedtva"],this.batch=10,this.theEnd=!1,this.offset=new R.a(0),this.orderSelected=new a.n,this.itemsDisplayedSubject=new w.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable()}ngOnInit(){this.reset()}getBatch(e){return this.ordersClient.search(this.from,this.to,this.clientName,this.recipeName,e,this.batch).pipe(Object(s.a)(e=>this.theEnd=!e.hasMore),Object(d.a)(e=>e.content))}nextBatch(e,t){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(t)}filterChange(){this.reset()}reset(){this.offset=new R.a(0),this.offset.pipe(Object(M.a)(500),Object(o.b)(e=>this.getBatch(e)),Object(I.a)((e,t)=>e.concat(t),[])).pipe(Object(s.a)(e=>this.itemsDisplayed=e),Object(s.a)(e=>this.itemsDisplayedSubject.next(e))).subscribe(),this.offset.next(0)}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(r.p))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-list-orders"]],viewQuery:function(e,t){if(1&e&&a.Bc(v.c,1),2&e){let e;a.mc(e=a.ac())&&(t.viewport=e.first)}},outputs:{orderSelected:"orderSelected"},decls:23,vars:13,consts:[["type","info"],[1,"form-group","col-lg-6"],["for","from",1,"form-label"],["id","from","type","date",1,"form-control",3,"ngModel","ngModelChange"],["for","to",1,"form-label"],["id","to","type","date",1,"form-control",3,"ngModel","ngModelChange"],["for","clientName",1,"form-label"],["id","clientName","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","recipeName",1,"form-label"],["id","recipeName","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"card","bg-primary","p-2"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],["head",""],["content",""],[1,"row","align-items-center"],[1,"col-6"],[1,"col-5"],[1,"col-1"],["class","row  align-items-center",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.Sb(0,"alert",0),a.Sb(1,"div"),a.Sb(2,"div",1),a.Sb(3,"label",2),a.wc(4,"Kisz\xe1ll\xedt\xe1s d\xe1tuma: "),a.Rb(),a.Sb(5,"input",3),a.Zb("ngModelChange",function(e){return t.from=e,t.filterChange()}),a.cc(6,"date"),a.Rb(),a.Rb(),a.Sb(7,"div",1),a.Sb(8,"label",4),a.wc(9," - "),a.Rb(),a.Sb(10,"input",5),a.Zb("ngModelChange",function(e){return t.to=e,t.filterChange()}),a.cc(11,"date"),a.Rb(),a.Rb(),a.Sb(12,"div",1),a.Sb(13,"label",6),a.wc(14," Fagyiz\xf3: "),a.Rb(),a.Sb(15,"input",7),a.Zb("ngModelChange",function(){return t.filterChange()})("ngModelChange",function(e){return t.clientName=e}),a.Rb(),a.Rb(),a.Sb(16,"div",1),a.Sb(17,"label",8),a.wc(18," Recept: "),a.Rb(),a.Sb(19,"input",9),a.Zb("ngModelChange",function(){return t.filterChange()})("ngModelChange",function(e){return t.recipeName=e}),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(20,"div",10),a.uc(21,Z,3,2,"ng-container",11),a.cc(22,"async"),a.Rb()),2&e&&(a.Bb(5),a.hc("ngModel",a.ec(6,5,t.from,"yyyy-MM-dd")),a.Bb(5),a.hc("ngModel",a.ec(11,8,t.to,"yyyy-MM-dd")),a.Bb(5),a.hc("ngModel",t.clientName),a.Bb(4),a.hc("ngModel",t.recipeName),a.Bb(2),a.hc("ngIf",a.dc(22,11,t.itemsDisplayedObservable)))},directives:[O.a,b.a,b.d,b.g,i.l,v.c,v.a,v.b,B.a,i.k],pipes:[i.e,i.b],styles:[""]}),e})()},{path:"place-order",component:C},{path:":id",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Gb({type:e,selectors:[["app-view-order"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Sb(0,"p"),a.wc(1,"view-order works!"),a.Rb())},styles:[""]}),e})()}];var A=n("PCNd");let F=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[i.c,c.d.forChild(D),A.a,b.b,h.b,p.c,v.d,O.b]]}),e})()}}]);