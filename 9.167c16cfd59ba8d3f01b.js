(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{cLqD:function(t,e,n){"use strict";n.r(e),n.d(e,"InventoryModule",function(){return j});var i=n("ofXK"),c=n("tyNb"),a=n("vxfF"),s=n("2Vo4"),o=n("XNiG"),r=n("vkgz"),b=n("lJxs"),l=n("gcYM"),u=n("5+tZ"),m=n("Kqap"),d=n("fXoL"),h=n("20UA"),y=n("3Pt+");let v=(()=>{class t{constructor(t){this.inventoryClient=t,this.completionSubject=new o.a,this.completionObservable=this.completionSubject.asObservable()}ngOnInit(){var t,e;this.quantity=(null===(t=this.item)||void 0===t?void 0:t.amountOnHand)/(null===(e=this.item)||void 0===e?void 0:e.quantityPerPackage)}submit(){this.inventoryClient.setInventory(this.item.id,this.quantity*this.item.quantityPerPackage).subscribe(t=>{this.item.amountOnHand=t.amountOnHand,this.completionSubject.next()})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(h.k))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-set-inventory-modal"]],inputs:{item:"item"},decls:14,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-subtitle"],[1,"modal-body"],["for","amount"],["id","amount","type","number",1,"form-control",3,"ngModel","min","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"h2",1),d.yc(2,"Rakt\xe1rk\xe9szlet be\xe1ll\xedt\xe1sa"),d.Rb(),d.Sb(3,"h3",2),d.yc(4),d.Rb(),d.Rb(),d.Sb(5,"div",3),d.Sb(6,"pre"),d.yc(7),d.Rb(),d.Sb(8,"label",4),d.yc(9,"\xdaj mennyis\xe9g"),d.Rb(),d.Sb(10,"input",5),d.Zb("ngModelChange",function(t){return e.quantity=t}),d.Rb(),d.yc(11),d.Sb(12,"button",6),d.Zb("click",function(){return e.submit()}),d.yc(13,"Ment\xe9s"),d.Rb(),d.Rb()),2&t&&(d.Bb(4),d.zc(e.item.name),d.Bb(3),d.Cc("    Rakt\xe1ron: ",e.item.amountOnHand/e.item.quantityPerPackage," db\n    Mennyis\xe9g: ",e.item.amountOnHand," ",e.item.measurementUnit,"\n\n  "),d.Bb(3),d.hc("ngModel",e.quantity)("min",0),d.Bb(1),d.Ac(" x ",e.item.quantityPerPackage," "))},directives:[y.k,y.b,y.h,y.j],styles:[""]}),t})(),g=(()=>{class t{constructor(t){this.inventoryClient=t,this.completionSubject=new o.a,this.completionObservable=this.completionSubject.asObservable(),this.quantity=0}ngOnInit(){}submit(){this.inventoryClient.addToInventory(this.item.id,this.quantity*this.item.quantityPerPackage).subscribe(t=>{this.item.amountOnHand=t.amountOnHand,this.completionSubject.next()})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(h.k))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-add-inventory-modal"]],inputs:{item:"item"},decls:14,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-subtitle"],[1,"modal-body"],["for","amount"],["id","amount","type","number",1,"form-control",3,"ngModel","min","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"h2",1),d.yc(2,"Rakt\xe1rk\xe9szlet be\xe1ll\xedt\xe1sa"),d.Rb(),d.Sb(3,"h3",2),d.yc(4),d.Rb(),d.Rb(),d.Sb(5,"div",3),d.Sb(6,"pre"),d.yc(7),d.Rb(),d.Sb(8,"label",4),d.yc(9,"Be\xe9rkezett mennyis\xe9g"),d.Rb(),d.Sb(10,"input",5),d.Zb("ngModelChange",function(t){return e.quantity=t}),d.Rb(),d.yc(11),d.Sb(12,"button",6),d.Zb("click",function(){return e.submit()}),d.yc(13,"Ment\xe9s"),d.Rb(),d.Rb()),2&t&&(d.Bb(4),d.zc(e.item.name),d.Bb(3),d.Cc("    Rakt\xe1ron: ",e.item.amountOnHand/e.item.quantityPerPackage," db\n    Mennyis\xe9g: ",e.item.amountOnHand," ",e.item.measurementUnit,"\n\n  "),d.Bb(3),d.hc("ngModel",e.quantity)("min",0),d.Bb(1),d.Ac(" x ",e.item.quantityPerPackage," "))},directives:[y.k,y.b,y.h,y.j],styles:[""]}),t})();var p=n("K3ix");let f=(()=>{class t{constructor(t){this.modalService=t}addInventoryDialog(t){const e=this.modalService.show(g,{initialState:{item:t}});return e.content.completionObservable.pipe(Object(r.a)(t=>e.hide()))}setInventoryDialog(t){const e=this.modalService.show(v,{initialState:{item:t}});return e.content.completionObservable.pipe(Object(r.a)(t=>e.hide()))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(p.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=n("6NWb");const R=function(t,e,n){return{"bg-danger":t,"bg-warning":e,"text-white":n}};function k(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",7),d.Sb(2,"div",1),d.yc(3),d.Rb(),d.Sb(4,"div",1),d.yc(5),d.Rb(),d.Sb(6,"div",1),d.yc(7),d.Rb(),d.Sb(8,"div",2),d.Sb(9,"button",8),d.Zb("click",function(){d.rc(t);const n=e.$implicit;return d.bc(2).set(n)}),d.Nb(10,"fa-icon",9),d.Rb(),d.Sb(11,"button",10),d.Zb("click",function(){d.rc(t);const n=e.$implicit;return d.bc(2).add(n)}),d.Nb(12,"fa-icon",11),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,n=d.bc(2);d.Bb(1),d.hc("ngClass",d.mc(9,R,n.isDanger(t),n.isWarning(t),n.isWarning(t)||n.isDanger(t))),d.Bb(2),d.zc(t.name),d.Bb(2),d.Cc("",t.amountOnHand," ",t.measurementUnit," (",t.amountOnHand/t.quantityPerPackage," csomag)"),d.Bb(2),d.Dc("",t.amountRequired," ",t.measurementUnit," (+ ",t.warningThreshold," ",t.measurementUnit,")")}}function O(t,e){if(1&t){const t=d.Tb();d.Qb(0,4),d.Sb(1,"cdk-virtual-scroll-viewport",5),d.Zb("scrolledIndexChange",function(e){d.rc(t);const n=d.bc();return n.nextBatch(e,n.orders.length)}),d.wc(2,k,13,13,"div",6),d.Rb(),d.Pb()}if(2&t){const t=e.ngIf;d.Bb(1),d.hc("itemSize",124),d.Bb(1),d.hc("cdkVirtualForOf",t)}}const w=[{path:"",component:(()=>{class t{constructor(t,e){this.inventoryClient=t,this.inventoryChangeService=e,this.batch=10,this.theEnd=!1,this.offset=new s.a(0),this.itemsDisplayedSubject=new o.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable()}ngOnInit(){this.reset()}getBatch(t){return this.inventoryClient.searchInventory(null,t,this.batch).pipe(Object(r.a)(t=>this.theEnd=!t.hasMore),Object(b.a)(t=>t.content))}nextBatch(t,e){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(e)}filterChange(){this.reset()}reset(){this.offset=new s.a(0),this.offset.pipe(Object(l.a)(500),Object(u.b)(t=>this.getBatch(t)),Object(m.a)((t,e)=>t.concat(e),[])).pipe(Object(r.a)(t=>this.itemsDisplayed=t),Object(r.a)(t=>this.itemsDisplayedSubject.next(t))).subscribe(),this.offset.next(0)}isDanger(t){return t.amountRequired>t.amountOnHand&&!this.isWarning(t)}isWarning(t){return t.amountRequired<=t.amountOnHand&&t.amountRequired+t.warningThreshold>t.amountOnHand}add(t){this.inventoryChangeService.addInventoryDialog(t).subscribe()}set(t){this.inventoryChangeService.setInventoryDialog(t).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(h.k),d.Mb(f))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-inventory"]],viewQuery:function(t,e){if(1&t&&d.Fc(a.c,1),2&t){let t;d.oc(t=d.ac())&&(e.viewport=t.first)}},decls:11,vars:3,consts:[[1,"row","col-lg-8","align-items-center"],[1,"col-3"],[1,"col-3","row"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"row","col-lg-8","align-items-center","align-self-center",3,"ngClass"],[1,"btn","btn-secondary","m-1",3,"click"],["icon","box"],[1,"btn","btn-primary","m-1",3,"click"],["icon","plus"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.yc(2,"Alapanyag"),d.Rb(),d.Sb(3,"div",1),d.yc(4,"Rakt\xe1ron"),d.Rb(),d.Sb(5,"div",1),d.yc(6,"Sz\xfcks\xe9ges"),d.Rb(),d.Nb(7,"div",2),d.Rb(),d.Nb(8,"hr"),d.wc(9,O,3,2,"ng-container",3),d.cc(10,"async")),2&t&&(d.Bb(9),d.hc("ngIf",d.dc(10,1,e.itemsDisplayedObservable)))},directives:[i.l,a.c,a.a,a.b,i.j,S.a],pipes:[i.b],styles:[""]}),t})()}];let j=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[i.c,c.e.forChild(w),a.d,S.c,y.f]]}),t})()}}]);