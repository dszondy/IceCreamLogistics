(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{R90S:function(e,t,i){"use strict";i.r(t),i.d(t,"DeliveryModule",function(){return V});var r=i("ofXK"),c=i("tyNb"),n=i("PCNd"),d=i("20UA"),s=i("fXoL"),o=i("3Pt+"),b=i("44PX"),l=i("vxfF"),a=i("2Vo4"),h=i("XNiG"),p=i("vkgz"),f=i("lJxs"),u=i("gcYM"),v=i("5+tZ"),y=i("Kqap"),m=i("psEu"),g=i("FrXe"),R=i("fU1k");function S(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",14),s.Sb(1,"div",15),s.yc(2),s.Rb(),s.Sb(3,"div",16),s.yc(4),s.Rb(),s.Sb(5,"div",17),s.Sb(6,"app-add-check",18),s.Zb("checkedChange",function(t){s.rc(e);const i=s.bc().$implicit;return s.bc(2).onOrderChecked(t,i)}),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.bc().$implicit,t=s.bc(2);s.Bb(2),s.Bc("",e.client.name," (",e.requestedDate,")"),s.Bb(2),s.zc(e.items.length),s.Bb(2),s.hc("checked",t.isOrderSelected(e))}}function w(e,t){if(1&e&&(s.Sb(0,"div",14),s.Sb(1,"div",15),s.yc(2),s.Rb(),s.Sb(3,"div",16),s.yc(4),s.Rb(),s.Nb(5,"div",17),s.Rb()),2&e){const e=t.$implicit;s.Bb(2),s.Ac(" ",e.recipe.name," "),s.Bb(2),s.Bc(" ",e.mixedAmount," / ",e.amount," ")}}function B(e,t){if(1&e&&s.wc(0,w,6,3,"div",19),2&e){const e=s.bc().$implicit;s.hc("ngForOf",e.items)}}function O(e,t){1&e&&(s.Sb(0,"app-tree-node"),s.wc(1,S,7,4,"ng-template",null,12,s.xc),s.wc(3,B,1,1,"ng-template",null,13,s.xc),s.Rb())}function M(e,t){if(1&e){const e=s.Tb();s.Qb(0,9),s.Sb(1,"cdk-virtual-scroll-viewport",10),s.Zb("scrolledIndexChange",function(i){s.rc(e);const r=t.ngIf;return s.bc().nextBatch(i,r.length)}),s.wc(2,O,5,0,"app-tree-node",11),s.Rb(),s.Pb()}if(2&e){const e=t.ngIf;s.Bb(1),s.hc("itemSize",124),s.Bb(1),s.hc("cdkVirtualForOf",e)}}let C=(()=>{class e{constructor(e){this.ordersClient=e,this.batch=10,this.theEnd=!1,this.offset=new a.a(0),this.itemsDisplayedSubject=new h.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable(),this.orderAdded=new s.n,this.orderRemoved=new s.n}ngOnInit(){this.reset()}getBatch(e){return this.ordersClient.searchForDelivery(new d.t,e,this.batch).pipe(Object(p.a)(e=>this.theEnd=!e.hasMore),Object(f.a)(e=>e.content))}nextBatch(e,t){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(t)}filterChange(){this.reset()}onOrderChecked(e,t){e?this.orderAdded.emit(t):this.orderRemoved.emit(t)}reset(){this.offset=new a.a(0),this.offset.pipe(Object(u.a)(500),Object(v.b)(e=>this.getBatch(e)),Object(y.a)((e,t)=>e.concat(t),[])).pipe(Object(p.a)(e=>this.itemsDisplayed=e),Object(p.a)(e=>this.itemsDisplayedSubject.next(e))).subscribe(),this.offset.next(0)}isOrderSelected(e){return this.selectedOrdersById.has(e.id)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d.w))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-list-orders-for-delivery"]],viewQuery:function(e,t){if(1&e&&s.Fc(l.c,1),2&e){let e;s.oc(e=s.ac())&&(t.viewport=e.first)}},inputs:{selectedOrdersById:"selectedOrdersById"},outputs:{orderAdded:"orderAdded",orderRemoved:"orderRemoved"},decls:18,vars:11,consts:[["type","info"],[1,"row"],[1,"form-group","col-lg-6"],["for","from",1,"form-label"],["id","from","type","date",1,"form-control",3,"ngModel","ngModelChange"],["for","to",1,"form-label"],["id","to","type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"card","bg-primary","p-2"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],["head",""],["content",""],[1,"row","align-items-center"],[1,"col-6"],[1,"col-5"],[1,"col-1"],[3,"checked","checkedChange"],["class","row  align-items-center",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.Sb(0,"alert",0),s.yc(1,"Keres\xe9s kisz\xe1ll\xedt\xe1si d\xe1tum szerint t\xf3l/ig"),s.Nb(2,"br"),s.Sb(3,"div",1),s.Sb(4,"div",2),s.Sb(5,"label",3),s.yc(6,"Kisz\xe1ll\xedt\xe1s d\xe1tuma: "),s.Rb(),s.Sb(7,"input",4),s.Zb("ngModelChange",function(e){return t.from=e,t.filterChange()}),s.cc(8,"date"),s.Rb(),s.Rb(),s.yc(9,"a "),s.Sb(10,"div",2),s.Sb(11,"label",5),s.yc(12," - "),s.Rb(),s.Sb(13,"input",6),s.Zb("ngModelChange",function(e){return t.to=e,t.filterChange()}),s.cc(14,"date"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(15,"div",7),s.wc(16,M,3,2,"ng-container",8),s.cc(17,"async"),s.Rb()),2&e&&(s.Bb(7),s.hc("ngModel",s.ec(8,3,t.from,"yyyy-MM-dd")),s.Bb(6),s.hc("ngModel",s.ec(14,6,t.to,"yyyy-MM-dd")),s.Bb(3),s.hc("ngIf",s.dc(17,9,t.itemsDisplayedObservable)))},directives:[m.a,o.b,o.h,o.j,r.l,l.c,l.a,l.b,g.a,R.a,r.k],pipes:[r.e,r.b],styles:[""]}),e})();var I=i("m1XX"),k=i("6NWb");function D(e,t){if(1&e&&(s.Sb(0,"div",3),s.Sb(1,"div",4),s.yc(2),s.cc(3,"date"),s.Rb(),s.Sb(4,"div",5),s.yc(5),s.Rb(),s.Nb(6,"div",5),s.Rb()),2&e){const e=s.bc().$implicit;s.Bb(2),s.Bc("",e.client.name," (",s.ec(3,3,e.requestedDate,"yyyy-MM-dd"),")"),s.Bb(3),s.zc(e.items.length)}}function j(e,t){if(1&e&&(s.Sb(0,"div",3),s.Sb(1,"div",4),s.yc(2),s.Rb(),s.Sb(3,"div",5),s.yc(4),s.Rb(),s.Sb(5,"div",5),s.Sb(6,"button",7),s.Nb(7,"fa-icon",8),s.Rb(),s.Rb(),s.Sb(8,"div",9),s.Sb(9,"div",10),s.yc(10),s.cc(11,"date"),s.Rb(),s.Rb(),s.Rb()),2&e){const e=t.$implicit,i=s.bc(2).$implicit;s.Bb(2),s.Ac(" ",e.recipe.name," "),s.Bb(2),s.Bc(" ",e.mixedAmount," / ",e.amount," "),s.Bb(2),s.jc("printSectionId","print-",i.id,"}-",e.recipe.id,""),s.Bb(3),s.jc("id","print-",i.id,"}-",e.recipe.id,""),s.Bb(1),s.Cc(" ",e.recipe.name," ",e.recipe.descriptionForLabels," ",s.ec(11,10,i.requestedDate,"yyyy-MM-dd")," ")}}function x(e,t){if(1&e&&s.wc(0,j,12,13,"div",6),2&e){const e=s.bc().$implicit;s.hc("ngForOf",e.items)}}function F(e,t){1&e&&(s.Sb(0,"app-tree-node"),s.wc(1,D,7,6,"ng-template",null,1,s.xc),s.wc(3,x,1,1,"ng-template",null,2,s.xc),s.Rb())}let A=(()=>{class e{constructor(){this.orderRemoved=new s.n}ngOnInit(){}onOrderChecked(e,t){this.orderRemoved.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-preview-batch"]],inputs:{orders:"orders"},outputs:{orderRemoved:"orderRemoved"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["head",""],["content",""],[1,"row","align-items-center"],[1,"col-6"],[1,"col-3"],["class","row  align-items-center",4,"ngFor","ngForOf"],["ngxPrint","",1,"btn","btn-light",3,"printSectionId"],["icon","print"],[2,"height","0","overflow","hidden"],[3,"id"]],template:function(e,t){1&e&&s.wc(0,F,5,0,"app-tree-node",0),2&e&&s.hc("ngForOf",t.orders)},directives:[r.k,g.a,I.a,k.a],pipes:[r.e],styles:[""]}),e})();function z(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",1),s.Sb(1,"div",2),s.Sb(2,"button",3),s.Zb("click",function(){return s.rc(e),s.bc().save()}),s.yc(3," Ment\xe9s "),s.Rb(),s.Rb(),s.Sb(4,"div",4),s.Sb(5,"div",5),s.Sb(6,"label",6),s.yc(7,"N\xe9v: "),s.Rb(),s.Sb(8,"input",7),s.Zb("ngModelChange",function(t){return s.rc(e),s.bc().delivery.name=t}),s.Rb(),s.Rb(),s.Sb(9,"div",8),s.Sb(10,"label",9),s.yc(11,"Kisz\xe1ll\xedt\xe1s d\xe1tuma: "),s.Rb(),s.Sb(12,"input",10),s.Zb("ngModelChange",function(t){return s.rc(e),s.bc().delivery.deliveryDate=t}),s.cc(13,"date"),s.Rb(),s.Rb(),s.Rb(),s.Sb(14,"tabset"),s.Sb(15,"tab",11,12),s.Sb(17,"app-list-orders-for-delivery",13),s.Zb("orderAdded",function(t){return s.rc(e),s.bc().orderAdded(t)})("orderRemoved",function(t){return s.rc(e),s.bc().orderRemoved(t)}),s.Rb(),s.Rb(),s.Sb(18,"tab",14),s.Sb(19,"app-preview-batch",15),s.Zb("orderRemoved",function(t){return s.rc(e),s.bc().orderRemoved(t)}),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.bc();s.Bb(8),s.hc("ngModel",e.delivery.name),s.Bb(4),s.hc("ngModel",s.ec(13,4,e.delivery.deliveryDate,"yyyy-MM-dd")),s.Bb(5),s.hc("selectedOrdersById",e.selectedOrdersById),s.Bb(2),s.hc("orders",e.selectedOrders())}}let Z=(()=>{class e{constructor(e,t){this.deliveryClient=t,this.selectedOrdersById=new Map,e.snapshot.params.id?this.deliveryClient.get(e.snapshot.params.id).subscribe(e=>{this.delivery=e,this.selectedOrdersById=new Map,this.delivery.orders.forEach(e=>{this.selectedOrdersById.set(e.id,e)})}):this.delivery=new d.g({name:"",deliveryDate:new Date,orders:[],id:void 0,completed:!1})}ngOnInit(){}save(){const e=new d.h({completed:!1,id:this.delivery.id,name:this.delivery.name,deliveryDate:new Date(Date.parse(this.delivery.deliveryDate)),orderIds:Array.from(this.selectedOrdersById.keys())});this.delivery.id?this.deliveryClient.update(e.id,e).subscribe(()=>{}):this.deliveryClient.create(e).subscribe(()=>{})}orderAdded(e){this.selectedOrdersById.set(e.id,e)}orderRemoved(e){this.selectedOrdersById.delete(e.id)}selectedOrders(){return Array.from(this.selectedOrdersById.values())}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(c.a),s.Mb(d.f))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-create-delivery-batch"]],decls:1,vars:1,consts:[["class","m-2 p-2",4,"ngIf"],[1,"m-2","p-2"],[1,"d-flex","row","justify-content-end"],[1,"btn","btn-success",3,"click"],[1,"row","mb-4"],[1,"row","p-2","col-lg-7","m-0"],["for","name"],["id","name","placeholder","Name","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","p-2","col-5","m-0"],["for","date"],["id","date","type","date",1,"form-control",3,"ngModel","ngModelChange"],["heading","Keres\xe9s"],["searchTab","tab"],[3,"selectedOrdersById","orderAdded","orderRemoved"],["heading","R\xe9szletek"],[3,"orders","orderRemoved"]],template:function(e,t){1&e&&s.wc(0,z,20,7,"div",0),2&e&&s.hc("ngIf",t.delivery)},directives:[r.l,o.b,o.h,o.j,b.c,b.a,C,A],pipes:[r.e],styles:[""]}),e})();const N=function(e){return[e]};function $(e,t){if(1&e&&(s.Sb(0,"div"),s.Sb(1,"alert",5),s.Sb(2,"div",6),s.Sb(3,"div",7),s.Sb(4,"a",8),s.yc(5),s.cc(6,"date"),s.Rb(),s.Rb(),s.Sb(7,"div",9),s.yc(8),s.Rb(),s.Sb(9,"div",9),s.yc(10),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e){const e=t.$implicit;s.Bb(4),s.hc("routerLink",s.kc(9,N,e.id)),s.Bb(1),s.Bc("",e.name," (",s.ec(6,6,e.deliveryDate,"yyyy-MM-dd"),")"),s.Bb(3),s.Bc("",e.orderCount," megrendel\xe9s ",e.clientCount," kliens sz\xe1m\xe1ra"),s.Bb(2),s.Ac(" ",e.completed?"Kisz\xe1ll\xedtva":"Folyamatban"," ")}}function E(e,t){if(1&e){const e=s.Tb();s.Qb(0,2),s.Sb(1,"cdk-virtual-scroll-viewport",3),s.Zb("scrolledIndexChange",function(i){s.rc(e);const r=t.ngIf;return s.bc().nextBatch(i,r.length)}),s.wc(2,$,11,11,"div",4),s.Rb(),s.Pb()}if(2&e){const e=t.ngIf;s.Bb(1),s.hc("itemSize",200),s.Bb(1),s.hc("cdkVirtualForOf",e)}}const K=[{path:"new",component:Z},{path:":id",component:Z},{path:"",component:(()=>{class e{constructor(e){this.deliveryClient=e,this.batch=10,this.theEnd=!1,this.offset=new a.a(0),this.deliverySelected=new s.n,this.itemsDisplayedSubject=new h.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable()}ngOnInit(){this.reset()}getBatch(e){return this.deliveryClient.list(null,e,this.batch).pipe(Object(p.a)(e=>this.theEnd=!e.hasMore),Object(f.a)(e=>e.content))}nextBatch(e,t){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(t)}filterChange(){this.reset()}reset(){this.offset=new a.a(0),this.offset.pipe(Object(u.a)(500),Object(v.b)(e=>this.getBatch(e)),Object(y.a)((e,t)=>e.concat(t),[])).pipe(Object(p.a)(e=>this.itemsDisplayed=e),Object(p.a)(e=>this.itemsDisplayedSubject.next(e))).subscribe(),this.offset.next(0)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d.f))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-list-deliveries"]],viewQuery:function(e,t){if(1&e&&s.Fc(l.c,1),2&e){let e;s.oc(e=s.ac())&&(t.viewport=e.first)}},outputs:{deliverySelected:"deliverySelected"},decls:3,vars:3,consts:[[1,"card","bg-primary","p-2"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],["type","success"],[1,"row","align-items-center"],[1,"col-6"],[1,"text-dark",3,"routerLink"],[1,"col-3"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.wc(1,E,3,2,"ng-container",1),s.cc(2,"async"),s.Rb()),2&e&&(s.Bb(1),s.hc("ngIf",s.dc(2,1,t.itemsDisplayedObservable)))},directives:[r.l,l.c,l.a,l.b,m.a,c.d],pipes:[r.b,r.e],styles:[""]}),e})()}];let V=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[r.c,n.a,c.e.forChild(K),o.f,b.b,l.d,m.b,k.c,I.b]]}),e})()}}]);