(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{cLqD:function(t,e,n){"use strict";n.r(e),n.d(e,"InventoryModule",function(){return w});var i=n("ofXK"),c=n("tyNb"),a=n("vxfF"),s=n("2Vo4"),o=n("XNiG"),r=n("vkgz"),b=n("lJxs"),l=n("gcYM"),u=n("5+tZ"),d=n("Kqap"),m=n("fXoL"),h=n("20UA"),v=n("3Pt+");let g=(()=>{class t{constructor(t){this.inventoryClient=t,this.completionSubject=new o.a,this.completionObservable=this.completionSubject.asObservable()}ngOnInit(){var t,e;this.quantity=(null===(t=this.item)||void 0===t?void 0:t.amountOnHand)/(null===(e=this.item)||void 0===e?void 0:e.quantityPerPackage)}submit(){this.inventoryClient.setInventory(this.item.id,this.quantity*this.item.quantityPerPackage).subscribe(t=>{this.item.amountOnHand=t.amountOnHand,this.completionSubject.next()})}}return t.\u0275fac=function(e){return new(e||t)(m.Mb(h.k))},t.\u0275cmp=m.Gb({type:t,selectors:[["app-set-inventory-modal"]],inputs:{item:"item"},decls:14,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-subtitle"],[1,"modal-body"],["for","amount"],["id","amount","type","number",1,"form-control",3,"ngModel","min","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"h2",1),m.xc(2,"Rakt\xe1rk\xe9szlet be\xe1ll\xedt\xe1sa"),m.Rb(),m.Sb(3,"h3",2),m.xc(4),m.Rb(),m.Rb(),m.Sb(5,"div",3),m.Sb(6,"pre"),m.xc(7),m.Rb(),m.Sb(8,"label",4),m.xc(9,"\xdaj mennyis\xe9g"),m.Rb(),m.Sb(10,"input",5),m.Zb("ngModelChange",function(t){return e.quantity=t}),m.Rb(),m.xc(11),m.Sb(12,"button",6),m.Zb("click",function(){return e.submit()}),m.xc(13,"Ment\xe9s"),m.Rb(),m.Rb()),2&t&&(m.Bb(4),m.yc(e.item.name),m.Bb(3),m.Bc("    Rakt\xe1ron: ",e.item.amountOnHand/e.item.quantityPerPackage," db\n    Mennyis\xe9g: ",e.item.amountOnHand," ",e.item.measurementUnit,"\n\n  "),m.Bb(3),m.hc("ngModel",e.quantity)("min",0),m.Bb(1),m.zc(" x ",e.item.quantityPerPackage," "))},directives:[v.k,v.b,v.h,v.j],styles:[""]}),t})(),p=(()=>{class t{constructor(t){this.inventoryClient=t,this.completionSubject=new o.a,this.completionObservable=this.completionSubject.asObservable(),this.quantity=0}ngOnInit(){}submit(){this.inventoryClient.addToInventory(this.item.id,this.quantity*this.item.quantityPerPackage).subscribe(t=>{this.item.amountOnHand=t.amountOnHand,this.completionSubject.next()})}}return t.\u0275fac=function(e){return new(e||t)(m.Mb(h.k))},t.\u0275cmp=m.Gb({type:t,selectors:[["app-add-inventory-modal"]],inputs:{item:"item"},decls:14,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-subtitle"],[1,"modal-body"],["for","amount"],["id","amount","type","number",1,"form-control",3,"ngModel","min","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"h2",1),m.xc(2,"Rakt\xe1rk\xe9szlet be\xe1ll\xedt\xe1sa"),m.Rb(),m.Sb(3,"h3",2),m.xc(4),m.Rb(),m.Rb(),m.Sb(5,"div",3),m.Sb(6,"pre"),m.xc(7),m.Rb(),m.Sb(8,"label",4),m.xc(9,"Be\xe9rkezett mennyis\xe9g"),m.Rb(),m.Sb(10,"input",5),m.Zb("ngModelChange",function(t){return e.quantity=t}),m.Rb(),m.xc(11),m.Sb(12,"button",6),m.Zb("click",function(){return e.submit()}),m.xc(13,"Ment\xe9s"),m.Rb(),m.Rb()),2&t&&(m.Bb(4),m.yc(e.item.name),m.Bb(3),m.Bc("    Rakt\xe1ron: ",e.item.amountOnHand/e.item.quantityPerPackage," db\n    Mennyis\xe9g: ",e.item.amountOnHand," ",e.item.measurementUnit,"\n\n  "),m.Bb(3),m.hc("ngModel",e.quantity)("min",0),m.Bb(1),m.zc(" x ",e.item.quantityPerPackage," "))},directives:[v.k,v.b,v.h,v.j],styles:[""]}),t})();var y=n("K3ix");let f=(()=>{class t{constructor(t){this.modalService=t}addInventoryDialog(t){const e=this.modalService.show(p,{initialState:{item:t}});return e.content.completionObservable.pipe(Object(r.a)(t=>e.hide()))}setInventoryDialog(t){const e=this.modalService.show(g,{initialState:{item:t}});return e.content.completionObservable.pipe(Object(r.a)(t=>e.hide()))}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(y.a))},t.\u0275prov=m.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=n("6NWb");const R=function(t,e,n){return{"bg-danger":t,"bg-warning":e,"text-white":n}};function k(t,e){if(1&t){const t=m.Tb();m.Sb(0,"div"),m.Sb(1,"div",7),m.Sb(2,"div",1),m.xc(3),m.Rb(),m.Sb(4,"div",1),m.xc(5),m.Rb(),m.Sb(6,"div",1),m.xc(7),m.Rb(),m.Sb(8,"div",2),m.Sb(9,"button",8),m.Zb("click",function(){m.qc(t);const n=e.$implicit;return m.bc(2).set(n)}),m.Nb(10,"fa-icon",9),m.Rb(),m.Sb(11,"button",10),m.Zb("click",function(){m.qc(t);const n=e.$implicit;return m.bc(2).add(n)}),m.Nb(12,"fa-icon",11),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){const t=e.$implicit,n=m.bc(2);m.Bb(1),m.hc("ngClass",m.lc(9,R,n.isDanger(t),n.isWarning(t),n.isWarning(t)||n.isDanger(t))),m.Bb(2),m.yc(t.name),m.Bb(2),m.Bc("",t.amountOnHand," ",t.measurementUnit," (",t.amountOnHand/t.quantityPerPackage," csomag)"),m.Bb(2),m.Cc("",t.amountRequired," ",t.measurementUnit," (+ ",t.warningThreshold," ",t.measurementUnit,")")}}function O(t,e){if(1&t){const t=m.Tb();m.Qb(0,4),m.Sb(1,"cdk-virtual-scroll-viewport",5),m.Zb("scrolledIndexChange",function(e){m.qc(t);const n=m.bc();return n.nextBatch(e,n.orders.length)}),m.vc(2,k,13,13,"div",6),m.Rb(),m.Pb()}if(2&t){const t=e.ngIf;m.Bb(1),m.hc("itemSize",124),m.Bb(1),m.hc("cdkVirtualForOf",t)}}const x=[{path:"",component:(()=>{class t{constructor(t,e){this.inventoryClient=t,this.inventoryChangeService=e,this.batch=10,this.theEnd=!1,this.offset=new s.a(0),this.itemsDisplayedSubject=new o.a,this.itemsDisplayedObservable=this.itemsDisplayedSubject.asObservable()}ngOnInit(){this.reset()}getBatch(t){return this.inventoryClient.searchInventory(null,t,this.batch).pipe(Object(r.a)(t=>this.theEnd=!t.hasMore),Object(b.a)(t=>t.content))}nextBatch(t,e){this.theEnd||this.viewport.getRenderedRange().end===this.viewport.getDataLength()&&this.offset.next(e)}filterChange(){this.reset()}reset(){this.offset=new s.a(0),this.offset.pipe(Object(l.a)(500),Object(u.b)(t=>this.getBatch(t)),Object(d.a)((t,e)=>t.concat(e),[])).pipe(Object(r.a)(t=>this.itemsDisplayed=t),Object(r.a)(t=>this.itemsDisplayedSubject.next(t))).subscribe(),this.offset.next(0)}isDanger(t){return t.amountRequired>t.amountOnHand&&!this.isWarning(t)}isWarning(t){return t.amountRequired<=t.amountOnHand&&t.amountRequired+t.warningThreshold>t.amountOnHand}add(t){this.inventoryChangeService.addInventoryDialog(t).subscribe()}set(t){this.inventoryChangeService.setInventoryDialog(t).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Mb(h.k),m.Mb(f))},t.\u0275cmp=m.Gb({type:t,selectors:[["app-inventory"]],viewQuery:function(t,e){if(1&t&&m.Fc(a.c,1),2&t){let t;m.nc(t=m.ac())&&(e.viewport=t.first)}},decls:11,vars:3,consts:[[1,"row","col-lg-8","align-items-center"],[1,"col-3"],[1,"col-3","row"],["style","height: 80vh",4,"ngIf"],[2,"height","80vh"],[2,"height","80vh",3,"itemSize","scrolledIndexChange"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"row","col-lg-8","align-items-center","align-self-center",3,"ngClass"],[1,"btn","btn-secondary","m-1",3,"click"],["icon","box"],[1,"btn","btn-primary","m-1",3,"click"],["icon","plus"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.xc(2,"Alapanyag"),m.Rb(),m.Sb(3,"div",1),m.xc(4,"Rakt\xe1ron"),m.Rb(),m.Sb(5,"div",1),m.xc(6,"Sz\xfcks\xe9ges"),m.Rb(),m.Nb(7,"div",2),m.Rb(),m.Nb(8,"hr"),m.vc(9,O,3,2,"ng-container",3),m.cc(10,"async")),2&t&&(m.Bb(9),m.hc("ngIf",m.dc(10,1,e.itemsDisplayedObservable)))},directives:[i.l,a.c,a.a,a.b,i.j,S.a],pipes:[i.b],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=m.Kb({type:t}),t.\u0275inj=m.Jb({factory:function(e){return new(e||t)},imports:[[i.c,c.e.forChild(x),a.d,S.c,v.f]]}),t})()}}]);